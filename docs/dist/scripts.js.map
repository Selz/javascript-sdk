{"version":3,"sources":["dist/client.mjs","docs/src/scripts.js"],"names":["_typeof","t","Symbol","iterator","constructor","prototype","_classCallCheck","e","TypeError","_defineProperties","n","r","length","enumerable","configurable","writable","Object","defineProperty","key","_createClass","_defineProperty","value","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","Array","isArray","o","i","s","a","next","done","push","return","getConstructor","instanceOf","isObject","isNumber","Number","isNaN","isString","String","isBoolean","Boolean","isFunction","Function","isNullOrUndefined","isObjectId","test","isCurrencyCode","isEmpty","keys","isUrl","arguments","window","URL","concat","hostname","is","array","object","number","string","boolean","function","nullOrUndefined","objectId","currencyCode","url","empty","getBase","config","urls","product","products","store","createCart","getCart","checkCarts","addToCart","updateCartItemQuantity","removeFromCart","client","ProductUrls","this","assign","ProductImage","ProductMedia","cover","ProductFile","ProductVariant","selected","id","ProductVariantAttributeOption","label","ProductVariantAttribute","options","map","Product","media","images","files","has_variants","variants","has_variant_attributes","variant_attributes","get","find","client$1","CartItem","cartId","variant_id","Cart","active","items","from","Store","replaceAll","replace","RegExp","toString","toTitleCase","charAt","toUpperCase","substr","toLowerCase","toPascalCase","buildFormData","FormData","forEach","File","append","extend","shift","includes","apply","parseJSON","Promise","JSON","parse","defaults","type","body","responseType","fetch","XMLHttpRequest","Error","request","addEventListener","response","then","success","errors","data","catch","status","open","send","queue","http","post","dedupe","filter","indexOf","parseUrl","storage","Map","getKey","host","pathname","Storage","root","carts","stores","ttl","schema","Date","getTime","purge","supported","localStorage","getItem","set","setItem","stringify","removeItem","now","getCarts","Client","env","getStore","setStore","getStoreId","currency","discount","setCart","getCartId","getActiveCart","join","entries","setCarts","values","setActiveCart","c","u","index","quantity","document","log","details","createElement","summary","innerHTML","appendChild","contents","pre","classList","add","output","prettyPrint","fail","error","resolve","reject","cart","currency_code","variant","updatedCart","getElementById","getProduct"],"mappings":"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","file":"scripts.js","sourcesContent":["function _typeof(t){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArrayLimit(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}var getConstructor=function(t){return null!=t?t.constructor:null},instanceOf=function(t,e){return!!(t&&e&&t instanceof e)},isArray=function(t){return Array.isArray(t)},isObject=function(t){return getConstructor(t)===Object},isNumber=function(t){return getConstructor(t)===Number&&!Number.isNaN(t)},isString=function(t){return getConstructor(t)===String},isBoolean=function(t){return getConstructor(t)===Boolean},isFunction=function(t){return getConstructor(t)===Function},isNullOrUndefined=function(t){return null==t},isObjectId=function(t){return isString(t)&&/^[a-f\\d]{24}$/i.test(t)},isCurrencyCode=function(t){return isString(t)&&/^[A-z]{3}$/.test(t)},isEmpty=function(t){return isNullOrUndefined(t)||(isString(t)||isArray(t))&&!t.length||isObject(t)&&!Object.keys(t).length},isUrl=function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(instanceOf(t,window.URL))return!0;var r=t;e||/^https?:\\/\\/*/.test(t)||(r=\"http://\".concat(t));try{return!isEmpty(new URL(r).hostname)}catch(t){return!1}},is={array:isArray,object:isObject,number:isNumber,string:isString,boolean:isBoolean,function:isFunction,nullOrUndefined:isNullOrUndefined,objectId:isObjectId,currencyCode:isCurrencyCode,url:isUrl,empty:isEmpty},getBase=function(t){return\"https://\".concat(is.empty(t)?\"sdk.selz.com\":\"\".concat(t,\"-selz.com/sdk\"),\"/\")},config={urls:{product:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"products/find?url=\").concat(e)},products:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:\"\",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;return\"\".concat(getBase(t),\"products/all/\").concat(e,\"?q=\").concat(r,\"&p=\").concat(n)},store:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return is.number(e)?\"\".concat(getBase(t),\"store/find/\").concat(e):\"\".concat(getBase(t),\"store/find?url=\").concat(e)},createCart:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/create/\").concat(e)},getCart:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/\").concat(e)},checkCarts:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/verify?ids=\").concat(e)},addToCart:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/add/\").concat(e)},updateCartItemQuantity:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/updateitemquantity/\").concat(e)},removeFromCart:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/remove/\").concat(e)}}},client=null,ProductUrls=function t(e){_classCallCheck(this,t),Object.assign(this,e)},ProductImage=function t(e){_classCallCheck(this,t),Object.assign(this,e)},ProductMedia=function t(e){_classCallCheck(this,t),Object.assign(this,e),this.cover=new ProductImage(e.cover)},ProductFile=function t(e){_classCallCheck(this,t),Object.assign(this,e)},ProductVariant=function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";_classCallCheck(this,t),Object.assign(this,e),this.selected=e.id===r},ProductVariantAttributeOption=function t(e,r){_classCallCheck(this,t),this.id=e,this.label=r},ProductVariantAttribute=function t(e){_classCallCheck(this,t),Object.assign(this,e),this.options=Object.keys(e.options).map(function(t){return new ProductVariantAttributeOption(t,e.options[t])})},Product=function(){function t(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:\"\";if(_classCallCheck(this,t),is.object(r)){if(client=e,Object.assign(this,r),this.store=client.store,is.object(r.urls)&&(this.urls=new ProductUrls(r.urls)),is.object(r.media)&&(this.media=new ProductMedia(r.media)),is.array(r.images)&&(this.images=r.images.map(function(t){return new ProductImage(t)})),is.array(r.files)&&(this.files=r.files.map(function(t){return new ProductFile(t)})),r.has_variants){var i=is.empty(n)?r.variants[0].id:n;this.variants=r.variants.map(function(t){return new ProductVariant(t,i)})}r.has_variant_attributes&&(this.variant_attributes=r.variant_attributes.map(function(t){return new ProductVariantAttribute(t)}))}}return _createClass(t,[{key:\"selected_variant\",get:function(){return is.empty(this.variants)?null:this.variants.find(function(t){return t.selected})}}]),t}(),client$1=null,CartItem=function t(e,r){_classCallCheck(this,t),this.cartId=r,Object.assign(this,e),this.product=new Product(client$1,e.product,e.variant_id)},Cart=function(){function t(e,r){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];_classCallCheck(this,t),null===r||(client$1=e,Object.assign(this,r),this.store=client$1.store,this.active=n,this.items=Array.from(r.items).map(function(t){return new CartItem(t,r.id)}))}return _createClass(t,[{key:\"add\",value:function(t){return client$1.addToCart(this.id,t)}},{key:\"remove\",value:function(t){return client$1.removeFromCart(this.id,t)}}]),t}(),Store=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,t),is.object(e)&&Object.assign(this,e)};function replaceAll(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"\",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:\"\";return t.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g,\"\\\\$1\"),\"g\"),r.toString())}function toTitleCase(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"\").toString().replace(/\\w\\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}function toPascalCase(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"\").toString();return t=replaceAll(t,\"-\",\" \"),t=replaceAll(t,\"_\",\" \"),replaceAll(t=toTitleCase(t),\" \",\"\")}var buildFormData=function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,i=r||new FormData;return is.object(e)?(Object.keys(e).forEach(function(r){t=n?\"\".concat(n,\"[\").concat(r,\"]\"):r,\"object\"!==_typeof(e[r])||e[r]instanceof File?i.append(toPascalCase(t),e[r]):buildFormData(e[r],i,r)}),i):i};function extend(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(!r.length)return t;var i=r.shift();return is.object(i)?(Object.keys(i).forEach(function(e){is.object(i[e])?(!Object.keys(t).includes(e)&&Object.assign(t,_defineProperty({},e,{})),extend(t[e],i[e])):Object.assign(t,_defineProperty({},e,i[e]))}),extend.apply(void 0,[t].concat(r))):t}function parseJSON(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e,r){try{e(JSON.parse(t))}catch(t){r(t)}})}var defaults={type:\"GET\",body:{},responseType:\"json\"};function fetch(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=extend({},defaults,e),n=r.type,i=r.body,o=r.responseType;return new Promise(function(e,r){try{var s=new XMLHttpRequest;if(!(\"withCredentials\"in s)){var a=new Error(\"No CORS support\");throw a.request=s,a}s.addEventListener(\"load\",function(){var t=s.response;\"json\"===o?parseJSON(t).then(function(t){if(!t.success){var r=new Error(\"Request failed\");throw r.errors=t.errors,r}e(t.data)}).catch(r):e(t)}),s.addEventListener(\"error\",function(){var t=new Error(s.status);throw t.request=s,t}),s.open(n,t,!0),\"json\"!==o&&(s.responseType=o),s.send(buildFormData(i))}catch(t){r(t)}})}var queue={},http={get:function(t){if(!Object.keys(queue).includes(t)){queue[t]=fetch(t);var e=function(){delete queue[t]};queue[t].then(e).catch(e)}return queue[t]},post:function(t){return fetch(t,{type:\"POST\",body:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}})}};function dedupe(t){return is.array(t)?t.filter(function(e,r){return t.indexOf(e)===r}):t}function parseUrl(t){var e=t;/^https?:\\/\\/*/.test(t)||(e=\"http://\".concat(t));try{return new URL(e)}catch(t){return null}}var storage=new Map,getKey=function(t){if(null===t)return null;var e=parseUrl(t);return null===e?null:\"\".concat(e.host).concat(e.pathname).replace(/\\/$/,\"\")},Storage=function(){function t(e){_classCallCheck(this,t),this.config=Object.assign({keys:{root:\"selz-js-sdk\",carts:\"carts\",stores:\"stores\"},ttl:3600,schema:new Date(\"2018-07-02\").getTime()},e),this.purge()}return _createClass(t,[{key:\"get\",value:function(e){var r=storage.get(this.config.keys.root);if(t.supported){var n=window.localStorage.getItem(this.config.keys.root);is.empty(n)||(r=JSON.parse(n))}return is.empty(r)?null:is.empty(e)?r:Object.keys(r).includes(e)?r[e]:null}},{key:\"set\",value:function(e,r){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i=this.get()||{};if(i[e]=n&&Object.keys(i).includes(e)?extend(i[e],r):r,storage.set(this.config.keys.root,i),t.supported){i.schema=this.config.schema;try{window.localStorage.setItem(this.config.keys.root,JSON.stringify(i))}catch(t){}}}},{key:\"purge\",value:function(){var t=this.get();if(!is.empty(t)){if(+t.schema!==this.config.schema)return void window.localStorage.removeItem(this.config.keys.root);var e=this.get(this.config.keys.stores)||[];is.empty(e)||this.set(this.config.keys.stores,e.filter(function(t){var e=+t.ttl;return 0<e&&e>Date.now()}))}}},{key:\"getCarts\",value:function(t){var e=this.get(this.config.keys.carts)||{};return is.empty(e)?null:is.number(t)?Object.keys(e).includes(t.toString())?e[t.toString()]:null:e}},{key:\"getCart\",value:function(t,e){var r=this.getCarts(t);return is.empty(r)?null:is.string(e)?Object.keys(r).includes(e.toUpperCase())?r[e.toUpperCase()]:null:r}},{key:\"setCart\",value:function(t,e,r){this.set(this.config.keys.carts,_defineProperty({},t,_defineProperty({},e.toUpperCase(),{id:r.id,active:r.active})),!0)}},{key:\"setCarts\",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.set(this.config.keys.carts,_defineProperty({},t,e))}},{key:\"getStore\",value:function(t){var e=null;if(!is.number(t)&&!is.url(t))return null;var r=this.get(this.config.keys.stores)||[];if(is.number(t))e=r.find(function(e){return is.object(e.data)&&e.data.id===t});else if(is.url(t)){var n=getKey(t);if(null===n)return null;e=r.find(function(t){return is.array(t.urls)&&t.urls.includes(n)})}if(!is.object(e))return null;var i=+e.ttl;return 0<i&&i<Date.now()?(this.purge(),null):new Store(e.data)}},{key:\"setStore\",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=getKey(e),n=this.get(this.config.keys.stores)||[],i=null;is.empty(n)||(i=n.find(function(e){return e.data.id===t.id}));var o=Date.now()+this.config.ttl;if(is.object(i)){if(Object.assign(i,{data:t,ttl:o}),null!==r){is.array(i.urls)?i.urls.push(r):i.urls=[r];var s=dedupe(i.urls);Object.assign(i,{urls:s})}}else{var a={data:t,ttl:o};null!==r&&Object.assign(a,{urls:[r]}),n.push(a)}this.set(this.config.keys.stores,n)}}],[{key:\"supported\",get:function(){if(!window.localStorage)return!1;try{return window.localStorage.setItem(\"___test\",\"___test\"),window.localStorage.removeItem(\"___test\"),!0}catch(t){return!1}}}]),t}(),Client=function(){function t(e){_classCallCheck(this,t);var r=e.env,n=e.store;if(this.env=is.empty(r)?\"\":r,this.store=n,!is.url(n)&&!is.number(n))throw Error(\"A store ID or URL is required to create a client\");this.storage=new Storage}return _createClass(t,[{key:\"getStoreId\",value:function(){var t=this;return new Promise(function(e,r){return is.number(t.store)?void e(t.store):t.store instanceof Store?void e(t.store.id):(!is.url(t.store)&&r(new Error(\"Url is required for user lookup\")),void t.getStore().then(function(t){e(t.id)}).catch(r))})}},{key:\"getStore\",value:function(){var t=this;return new Promise(function(e,r){if(is.number(t.store)||is.url(t.store)){var n=t.storage.getStore(t.store);if(null!==n&&n instanceof Store)return void e(n)}if(t.store instanceof Store)e(t.store);else{var i=config.urls.store(t.env,t.store);http.get(i).then(function(r){t.setStore(r),e(t.store)}).catch(r)}})}},{key:\"setStore\",value:function(t){if(is.object(t)){var e=is.url(this.store)?this.store:null;this.store=new Store(t),this.storage.setStore(this.store,e)}}},{key:\"getProduct\",value:function(t){var e=this;return new Promise(function(r,n){http.get(config.urls.product(e.env,t)).then(function(t){e.store instanceof Store||e.setStore(t.store),r(new Product(e,t))}).catch(n)})}},{key:\"getProducts\",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"\",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new Promise(function(n,i){t.getStoreId().then(function(o){var s=is.empty(e)?\"\":e;http.get(config.urls.products(t.env,o,s,1>r?1:r)).then(function(e){n(Object.assign(e,{products:e.products.map(function(e){return new Product(t,e)})}))}).catch(i)}).catch(i)})}},{key:\"createCart\",value:function(t,e){var r=this;return new Promise(function(n,i){return is.empty(t)?void i(new Error(\"currency is required\")):void r.getStoreId().then(function(o){var s=t.toUpperCase();http.post(config.urls.createCart(r.env,o),{currency:s,discount:is.empty(e)?null:e}).then(function(t){var e=new Cart(r,t);r.storage.setCart(o,s,e),n(e)}).catch(i)}).catch(i)})}},{key:\"getCartId\",value:function(t){var e=this;return new Promise(function(r,n){return is.currencyCode(t)?void e.getStoreId().then(function(i){var o=t.toUpperCase(),s=e.storage.getCart(i,o);is.empty(s)?e.createCart(o).then(function(t){return r(t.id)}).catch(n):r(s.id)}).catch(n):void n(new Error(\"A valid currency code is required\"))})}},{key:\"getCart\",value:function(t){var e=this;return new Promise(function(r,n){var i=is.currencyCode(t),o=is.objectId(t);if(i||o)if(i){var s=t.toUpperCase();e.getCartId(s).then(function(t){return is.empty(t)?void n(new Error(\"Could not find matching cart for currency code '\".concat(s,\"'\"))):void e.getCart(t).then(function(t){e.setStore(t.store),r(t)}).catch(n)}).catch(n)}else http.get(config.urls.getCart(e.env,t)).then(function(t){var n=e.getActiveCart(),i=new Cart(e,t,t.id===n);e.setStore(i.store),r(i)}).catch(n);else n(new Error(\"A valid currency code or cart id are required\"))})}},{key:\"getCarts\",value:function(){var t=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return new Promise(function(r,n){t.getStoreId().then(function(i){var o=t.storage.getCarts(i);if(is.empty(o))r(null);else if(e){var s=Object.keys(o).map(function(t){return o[t].id});http.get(config.urls.checkCarts(t.env,s.join(\",\"))).then(function(e){Object.entries(e).forEach(function(t){var e=_slicedToArray(t,2),r=e[0];if(!e[1]){var n=Object.keys(o).find(function(t){return o[t].id===r});delete o[n]}}),t.storage.setCarts(i,o),Object.values(o).find(function(t){return t.active})?r(o):t.setActiveCart().then(r).catch(n)}).catch(n)}else r(o)}).catch(n)})}},{key:\"setActiveCart\",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(r,n){t.getStoreId().then(function(i){t.getCarts(!1).then(function(o){var s=o;if(is.empty(s))r(null);else{if(is.currencyCode(e)){var a=e.toUpperCase(),c=Object.keys(s);if(!c.includes(a))return void n(new Error(\"No carts for \".concat(a)));c.forEach(function(t){s[t].active=t===a})}else{var u=is.objectId(e)?e:s[Object.keys(s)[0]].id;Object.keys(s).forEach(function(t){var e=s[t];e.active=e.id===u})}t.storage.setCarts(i,s),r(s)}})}).catch(n)})}},{key:\"getActiveCart\",value:function(){var t=this,e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];return new Promise(function(r,n){t.getStoreId().then(function(i){var o=t.storage.getCarts(i);if(Object.keys(o).length){var s=Object.values(o).find(function(t){return t.active});return s?e?void t.getCart(s.id).then(r).catch(n):void r(s.id):void r(null)}r(null)}).catch(n)})}},{key:\"addToCart\",value:function(t,e){var r=this;return new Promise(function(n,i){return is.objectId(t)?is.empty(e)?void i(new Error(\"A valid product is required\")):void http.post(config.urls.addToCart(r.env,t),e).then(function(t){var e=new Cart(r,t,!0);r.setStore(e.store),r.setActiveCart(e.id).then(function(){n(e)}).catch(i)}).catch(i):void i(new Error(\"A valid id is required\"))})}},{key:\"updateCartItemQuantity\",value:function(t,e){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return new Promise(function(i,o){return is.objectId(t)?is.empty(e)?void o(new Error(\"A valid index is required\")):void http.post(config.urls.updateCartItemQuantity(r.env,t),{index:e,quantity:n}).then(function(t){var e=new Cart(r,t,!0);r.setStore(e.store),r.setActiveCart(e.id).then(function(){i(e)}).catch(o)}).catch(o):void o(new Error(\"A valid id is required\"))})}},{key:\"removeFromCart\",value:function(t,e){var r=this;return new Promise(function(n,i){return is.objectId(t)?is.empty(e)?void i(new Error(\"A valid index is required\")):void http.post(config.urls.removeFromCart(r.env,t),{index:e}).then(function(t){if(is.empty(t))r.getCarts().then(function(){return n(null)}).catch(i);else{var e=new Cart(r,t,!0);r.setActiveCart(e.id).then(function(){n(e)}).catch(i)}}).catch(i):void i(new Error(\"A valid id is required\"))})}}]),t}();export default Client;export{Product,Cart,Store};","import Client from '../../dist/client';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const output = document.getElementById('output');\n\n    function log(label, data) {\n        // console.log(label, data);\n        const details = document.createElement('details');\n\n        const summary = document.createElement('summary');\n        summary.innerHTML = label;\n        details.appendChild(summary);\n\n        const contents = document.createElement('div');\n        const pre = document.createElement('pre');\n        pre.classList.add('prettyprint');\n        pre.innerHTML = JSON.stringify(data, null, 4);\n        contents.appendChild(pre);\n        details.appendChild(contents);\n\n        output.appendChild(details);\n\n        window.prettyPrint();\n    }\n\n    function fail(label, errors) {\n        if (errors instanceof Error) {\n            // console.error(errors);\n            return log(`${label} (error)`, { error: errors.toString() });\n        }\n\n        return log(`${label} (failed)`, errors);\n    }\n\n    const client = new Client({\n        store: 'local.sampotts.me',\n        env: 'local',\n    });\n\n    // Expose\n    window.client = client;\n\n    log('Client', client);\n\n    function getCart(currency) {\n        return new Promise((resolve, reject) => {\n            if (window.cart) {\n                resolve(window.cart);\n                return;\n            }\n\n            client\n                .getCart(currency)\n                .then(cart => {\n                    log('Get cart', cart);\n\n                    window.cart = cart;\n\n                    resolve(cart);\n                })\n                .catch(error => reject(error));\n        });\n    }\n\n    function addToCart(product) {\n        getCart(product.currency_code)\n            .then(cart => {\n                let variant = null;\n\n                if (typeof product.variant === 'string' && product.variant.length) {\n                    ({ variant } = product);\n                } else if (product.variants && product.variants.length) {\n                    variant = product.variants[0].id;\n                }\n\n                cart.add({\n                    id: product.id,\n                    quantity: 2,\n                    variant_id: variant,\n                })\n                    .then(updatedCart => {\n                        log('Add to cart', updatedCart);\n\n                        window.cart = updatedCart;\n                    })\n                    .catch(error => fail('Add to cart', error));\n            })\n            .catch(error => fail('Get cart', error));\n    }\n\n    const products = {\n        GBP: 'http://selz.co/1MaSYRU',\n        USD: 'http://selz.co/1rvbhT6',\n    };\n\n    client\n        .getProduct(products.GBP)\n        .then(product => {\n            log('Product', product);\n\n            // Expose\n            window.product = product;\n\n            addToCart(product);\n        })\n        .catch(errors => fail('Product', errors));\n\n    // Listen for messages from parent\n    /* window.addEventListener('message', event => {\n        // console.warn(event.data);\n        const json = JSON.parse(event.data);\n\n        if (json.key !== 'add-to-cart') {\n            return;\n        }\n\n        addToCart(json.data);\n    }); */\n});\n"]}