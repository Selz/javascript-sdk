{"version":3,"sources":["dist/client.mjs","docs/src/scripts.js"],"names":["_typeof","t","Symbol","iterator","constructor","prototype","_classCallCheck","e","TypeError","_defineProperties","n","r","length","enumerable","configurable","writable","Object","defineProperty","key","_createClass","_defineProperty","value","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","Array","isArray","o","i","s","c","next","done","push","return","getConstructor","instanceOf","isObject","isNumber","Number","isNaN","isString","String","isBoolean","Boolean","isFunction","Function","isNullOrUndefined","isObjectId","test","isCurrencyCode","isEmpty","keys","isUrl","arguments","window","URL","concat","hostname","is","array","object","number","string","boolean","function","nullOrUndefined","objectId","currencyCode","url","empty","getBase","config","urls","product","products","categories","store","createCart","getCart","checkCarts","addToCart","updateCartItemQuantity","removeFromCart","client","ProductUrls","this","assign","ProductImage","ProductMedia","cover","ProductFile","ProductVariant","selected","id","ProductVariantAttributeOption","label","ProductVariantAttribute","options","map","Product","media","images","files","has_variants","variants","has_variant_attributes","variant_attributes","get","find","client$1","CartItem","cartId","variant_id","Cart","active","items","from","Category","Store","replaceAll","replace","RegExp","toString","toTitleCase","charAt","toUpperCase","substr","toLowerCase","toPascalCase","buildFormData","FormData","forEach","File","append","extend","shift","includes","apply","parseJSON","Promise","JSON","parse","defaults","type","body","responseType","fetch","XMLHttpRequest","Error","request","addEventListener","response","then","success","errors","data","catch","status","open","send","queue","http","post","dedupe","filter","indexOf","parseUrl","storage","Map","getKey","host","pathname","Storage","root","carts","stores","ttl","schema","Date","getTime","purge","supported","localStorage","getItem","set","setItem","stringify","removeItem","now","getCarts","Client","env","getStore","setStore","getStoreId","currency","discount","setCart","getCartId","getActiveCart","join","entries","setCarts","values","setActiveCart","a","u","index","quantity","document","log","details","createElement","summary","innerHTML","appendChild","contents","pre","classList","add","output","prettyPrint","fail","error","resolve","reject","cart","currency_code","variant","updatedCart","getElementById","getProduct"],"mappings":"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","file":"scripts.js","sourcesContent":["function _typeof(t){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArrayLimit(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}return r}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}var getConstructor=function(t){return null!=t?t.constructor:null},instanceOf=function(t,e){return!!(t&&e&&t instanceof e)},isArray=function(t){return Array.isArray(t)},isObject=function(t){return getConstructor(t)===Object},isNumber=function(t){return getConstructor(t)===Number&&!Number.isNaN(t)},isString=function(t){return getConstructor(t)===String},isBoolean=function(t){return getConstructor(t)===Boolean},isFunction=function(t){return getConstructor(t)===Function},isNullOrUndefined=function(t){return null==t},isObjectId=function(t){return isString(t)&&/^[a-f\\d]{24}$/i.test(t)},isCurrencyCode=function(t){return isString(t)&&/^[A-z]{3}$/.test(t)},isEmpty=function(t){return isNullOrUndefined(t)||(isString(t)||isArray(t))&&!t.length||isObject(t)&&!Object.keys(t).length},isUrl=function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(instanceOf(t,window.URL))return!0;var r=t;e||/^https?:\\/\\/*/.test(t)||(r=\"http://\".concat(t));try{return!isEmpty(new URL(r).hostname)}catch(t){return!1}},is={array:isArray,object:isObject,number:isNumber,string:isString,boolean:isBoolean,function:isFunction,nullOrUndefined:isNullOrUndefined,objectId:isObjectId,currencyCode:isCurrencyCode,url:isUrl,empty:isEmpty},getBase=function(t){return\"https://\".concat(is.empty(t)?\"\":\"\".concat(t,\"-\"),\"selz.com/sdk/\")},config={urls:{product:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"products/find?url=\").concat(e)},products:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:\"\",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:\"\",i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1;return\"\".concat(getBase(t),\"products/all/\").concat(e,\"?q=\").concat(r,\"&c=\").concat(n,\"&p=\").concat(i)},categories:function(t,e){return\"\".concat(getBase(t),\"categories/\").concat(e)},store:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return is.number(e)?\"\".concat(getBase(t),\"store/find/\").concat(e):\"\".concat(getBase(t),\"store/find?url=\").concat(e)},createCart:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/create/\").concat(e)},getCart:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/\").concat(e)},checkCarts:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/verify?ids=\").concat(e)},addToCart:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/add/\").concat(e)},updateCartItemQuantity:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/updateitemquantity/\").concat(e)},removeFromCart:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";return\"\".concat(getBase(t),\"cart/remove/\").concat(e)}}},client=null,ProductUrls=function t(e){_classCallCheck(this,t),Object.assign(this,e)},ProductImage=function t(e){_classCallCheck(this,t),Object.assign(this,e)},ProductMedia=function t(e){_classCallCheck(this,t),Object.assign(this,e),this.cover=new ProductImage(e.cover)},ProductFile=function t(e){_classCallCheck(this,t),Object.assign(this,e)},ProductVariant=function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";_classCallCheck(this,t),Object.assign(this,e),this.selected=e.id===r},ProductVariantAttributeOption=function t(e,r){_classCallCheck(this,t),this.id=e,this.label=r},ProductVariantAttribute=function t(e){_classCallCheck(this,t),Object.assign(this,e),this.options=Object.keys(e.options).map(function(t){return new ProductVariantAttributeOption(t,e.options[t])})},Product=function(){function t(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:\"\";if(_classCallCheck(this,t),is.object(r)){if(client=e,Object.assign(this,r),this.store=client.store,is.object(r.urls)&&(this.urls=new ProductUrls(r.urls)),is.object(r.media)&&(this.media=new ProductMedia(r.media)),is.array(r.images)&&(this.images=r.images.map(function(t){return new ProductImage(t)})),is.array(r.files)&&(this.files=r.files.map(function(t){return new ProductFile(t)})),r.has_variants){var i=is.empty(n)?r.variants[0].id:n;this.variants=r.variants.map(function(t){return new ProductVariant(t,i)})}r.has_variant_attributes&&(this.variant_attributes=r.variant_attributes.map(function(t){return new ProductVariantAttribute(t)}))}}return _createClass(t,[{key:\"selected_variant\",get:function(){return is.empty(this.variants)?null:this.variants.find(function(t){return t.selected})}}]),t}(),client$1=null,CartItem=function t(e,r){_classCallCheck(this,t),this.cartId=r,Object.assign(this,e),this.product=new Product(client$1,e.product,e.variant_id)},Cart=function(){function t(e,r){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];_classCallCheck(this,t),null===r||(client$1=e,Object.assign(this,r),this.store=client$1.store,this.active=n,this.items=Array.from(r.items).map(function(t){return new CartItem(t,r.id)}))}return _createClass(t,[{key:\"add\",value:function(t){return client$1.addToCart(this.id,t)}},{key:\"remove\",value:function(t){return client$1.removeFromCart(this.id,t)}}]),t}(),Category=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,t),is.object(e)&&Object.assign(this,e)},Store=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,t),is.object(e)&&Object.assign(this,e)};function replaceAll(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"\",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:\"\";return t.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g,\"\\\\$1\"),\"g\"),r.toString())}function toTitleCase(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"\").toString().replace(/\\w\\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}function toPascalCase(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"\").toString();return t=replaceAll(t,\"-\",\" \"),t=replaceAll(t,\"_\",\" \"),replaceAll(t=toTitleCase(t),\" \",\"\")}var buildFormData=function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,i=r||new FormData;return is.object(e)?(Object.keys(e).forEach(function(r){t=n?\"\".concat(n,\"[\").concat(r,\"]\"):r,\"object\"!==_typeof(e[r])||e[r]instanceof File?i.append(toPascalCase(t),e[r]):buildFormData(e[r],i,r)}),i):i};function extend(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(!r.length)return t;var i=r.shift();return is.object(i)?(Object.keys(i).forEach(function(e){is.object(i[e])?(!Object.keys(t).includes(e)&&Object.assign(t,_defineProperty({},e,{})),extend(t[e],i[e])):Object.assign(t,_defineProperty({},e,i[e]))}),extend.apply(void 0,[t].concat(r))):t}function parseJSON(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e,r){try{e(JSON.parse(t))}catch(t){r(t)}})}var defaults={type:\"GET\",body:{},responseType:\"json\"};function fetch(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=extend({},defaults,e),n=r.type,i=r.body,o=r.responseType;return new Promise(function(e,r){try{var s=new XMLHttpRequest;if(!(\"withCredentials\"in s)){var c=new Error(\"No CORS support\");throw c.request=s,c}s.addEventListener(\"load\",function(){var t=s.response;\"json\"===o?parseJSON(t).then(function(t){if(!t.success){var r=new Error(\"Request failed\");throw r.errors=t.errors,r}e(t.data)}).catch(r):e(t)}),s.addEventListener(\"error\",function(){var t=new Error(s.status);throw t.request=s,t}),s.open(n,t,!0),\"json\"!==o&&(s.responseType=o),s.send(buildFormData(i))}catch(t){r(t)}})}var queue={},http={get:function(t){if(!Object.keys(queue).includes(t)){queue[t]=fetch(t);var e=function(){delete queue[t]};queue[t].then(e).catch(e)}return queue[t]},post:function(t){return fetch(t,{type:\"POST\",body:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}})}};function dedupe(t){return is.array(t)?t.filter(function(e,r){return t.indexOf(e)===r}):t}function parseUrl(t){var e=t;/^https?:\\/\\/*/.test(t)||(e=\"http://\".concat(t));try{return new URL(e)}catch(t){return null}}var storage=new Map,getKey=function(t){if(null===t)return null;var e=parseUrl(t);return null===e?null:\"\".concat(e.host).concat(e.pathname).replace(/\\/$/,\"\")},Storage=function(){function t(e){_classCallCheck(this,t),this.config=Object.assign({keys:{root:\"selz-js-sdk\",carts:\"carts\",stores:\"stores\"},ttl:3600,schema:new Date(\"2018-07-02\").getTime()},e),this.purge()}return _createClass(t,[{key:\"get\",value:function(e){var r=storage.get(this.config.keys.root);if(t.supported){var n=window.localStorage.getItem(this.config.keys.root);is.empty(n)||(r=JSON.parse(n))}return is.empty(r)?null:is.empty(e)?r:Object.keys(r).includes(e)?r[e]:null}},{key:\"set\",value:function(e,r){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i=this.get()||{};if(i[e]=n&&Object.keys(i).includes(e)?extend(i[e],r):r,storage.set(this.config.keys.root,i),t.supported){i.schema=this.config.schema;try{window.localStorage.setItem(this.config.keys.root,JSON.stringify(i))}catch(t){}}}},{key:\"purge\",value:function(){var t=this.get();if(!is.empty(t)){if(+t.schema!==this.config.schema)return void window.localStorage.removeItem(this.config.keys.root);var e=this.get(this.config.keys.stores)||[];is.empty(e)||this.set(this.config.keys.stores,e.filter(function(t){var e=+t.ttl;return 0<e&&e>Date.now()}))}}},{key:\"getCarts\",value:function(t){var e=this.get(this.config.keys.carts)||{};return is.empty(e)?null:is.number(t)?Object.keys(e).includes(t.toString())?e[t.toString()]:null:e}},{key:\"getCart\",value:function(t,e){var r=this.getCarts(t);return is.empty(r)?null:is.string(e)?Object.keys(r).includes(e.toUpperCase())?r[e.toUpperCase()]:null:r}},{key:\"setCart\",value:function(t,e,r){this.set(this.config.keys.carts,_defineProperty({},t,_defineProperty({},e.toUpperCase(),{id:r.id,active:r.active})),!0)}},{key:\"setCarts\",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.set(this.config.keys.carts,_defineProperty({},t,e))}},{key:\"getStore\",value:function(t){var e=null;if(!is.number(t)&&!is.url(t))return null;var r=this.get(this.config.keys.stores)||[];if(is.number(t))e=r.find(function(e){return is.object(e.data)&&e.data.id===t});else if(is.url(t)){var n=getKey(t);if(null===n)return null;e=r.find(function(t){return is.array(t.urls)&&t.urls.includes(n)})}if(!is.object(e))return null;var i=+e.ttl;return 0<i&&i<Date.now()?(this.purge(),null):new Store(e.data)}},{key:\"setStore\",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=getKey(e),n=this.get(this.config.keys.stores)||[],i=null;is.empty(n)||(i=n.find(function(e){return e.data.id===t.id}));var o=Date.now()+this.config.ttl;if(is.object(i)){if(Object.assign(i,{data:t,ttl:o}),null!==r){is.array(i.urls)?i.urls.push(r):i.urls=[r];var s=dedupe(i.urls);Object.assign(i,{urls:s})}}else{var c={data:t,ttl:o};null!==r&&Object.assign(c,{urls:[r]}),n.push(c)}this.set(this.config.keys.stores,n)}}],[{key:\"supported\",get:function(){if(!window.localStorage)return!1;try{return window.localStorage.setItem(\"___test\",\"___test\"),window.localStorage.removeItem(\"___test\"),!0}catch(t){return!1}}}]),t}(),Client=function(){function t(e){_classCallCheck(this,t);var r=e.env,n=e.store;if(this.env=is.empty(r)?\"\":r,this.store=n,!is.url(n)&&!is.number(n))throw Error(\"A store ID or URL is required to create a client\");this.storage=new Storage}return _createClass(t,[{key:\"getStoreId\",value:function(){var t=this;return new Promise(function(e,r){return is.number(t.store)?void e(t.store):t.store instanceof Store?void e(t.store.id):(!is.url(t.store)&&r(new Error(\"Url is required for user lookup\")),void t.getStore().then(function(t){e(t.id)}).catch(r))})}},{key:\"getStore\",value:function(){var t=this;return new Promise(function(e,r){if(is.number(t.store)||is.url(t.store)){var n=t.storage.getStore(t.store);if(null!==n&&n instanceof Store)return void e(n)}if(t.store instanceof Store)e(t.store);else{var i=config.urls.store(t.env,t.store);http.get(i).then(function(r){t.setStore(r),e(t.store)}).catch(r)}})}},{key:\"setStore\",value:function(t){if(is.object(t)){var e=is.url(this.store)?this.store:null;this.store=new Store(t),this.storage.setStore(this.store,e)}}},{key:\"getProduct\",value:function(t){var e=this;return new Promise(function(r,n){http.get(config.urls.product(e.env,t)).then(function(t){e.store instanceof Store||e.setStore(t.store),r(new Product(e,t))}).catch(n)})}},{key:\"getProducts\",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"\",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return new Promise(function(i,o){t.getStoreId().then(function(s){http.get(config.urls.products(t.env,s,is.empty(e)?\"\":e,r,1>n?1:n)).then(function(e){i(Object.assign(e,{products:e.products.map(function(e){return new Product(t,e)})}))}).catch(o)}).catch(o)})}},{key:\"getCategories\",value:function(){var t=this;return new Promise(function(e,r){t.getStoreId().then(function(n){http.get(config.urls.categories(t.env,n)).then(function(t){e(Object.assign(t,{categories:t.categories.map(function(t){return new Category(t)})}))}).catch(r)}).catch(r)})}},{key:\"createCart\",value:function(t,e){var r=this;return new Promise(function(n,i){return is.empty(t)?void i(new Error(\"currency is required\")):void r.getStoreId().then(function(o){var s=t.toUpperCase();http.post(config.urls.createCart(r.env,o),{currency:s,discount:is.empty(e)?null:e}).then(function(t){var e=new Cart(r,t);r.storage.setCart(o,s,e),n(e)}).catch(i)}).catch(i)})}},{key:\"getCartId\",value:function(t){var e=this;return new Promise(function(r,n){return is.currencyCode(t)?void e.getStoreId().then(function(i){var o=t.toUpperCase(),s=e.storage.getCart(i,o);is.empty(s)?e.createCart(o).then(function(t){return r(t.id)}).catch(n):r(s.id)}).catch(n):void n(new Error(\"A valid currency code is required\"))})}},{key:\"getCart\",value:function(t){var e=this;return new Promise(function(r,n){var i=is.currencyCode(t),o=is.objectId(t);if(i||o)if(i){var s=t.toUpperCase();e.getCartId(s).then(function(t){return is.empty(t)?void n(new Error(\"Could not find matching cart for currency code '\".concat(s,\"'\"))):void e.getCart(t).then(function(t){e.setStore(t.store),r(t)}).catch(n)}).catch(n)}else http.get(config.urls.getCart(e.env,t)).then(function(t){var n=e.getActiveCart(),i=new Cart(e,t,t.id===n);e.setStore(i.store),r(i)}).catch(n);else n(new Error(\"A valid currency code or cart id are required\"))})}},{key:\"getCarts\",value:function(){var t=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return new Promise(function(r,n){t.getStoreId().then(function(i){var o=t.storage.getCarts(i);if(is.empty(o))r(null);else if(e){var s=Object.keys(o).map(function(t){return o[t].id});http.get(config.urls.checkCarts(t.env,s.join(\",\"))).then(function(e){Object.entries(e).forEach(function(t){var e=_slicedToArray(t,2),r=e[0];if(!e[1]){var n=Object.keys(o).find(function(t){return o[t].id===r});delete o[n]}}),t.storage.setCarts(i,o),Object.values(o).find(function(t){return t.active})?r(o):t.setActiveCart().then(r).catch(n)}).catch(n)}else r(o)}).catch(n)})}},{key:\"setActiveCart\",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(r,n){t.getStoreId().then(function(i){t.getCarts(!1).then(function(o){var s=o;if(is.empty(s))r(null);else{if(is.currencyCode(e)){var c=e.toUpperCase(),a=Object.keys(s);if(!a.includes(c))return void n(new Error(\"No carts for \".concat(c)));a.forEach(function(t){s[t].active=t===c})}else{var u=is.objectId(e)?e:s[Object.keys(s)[0]].id;Object.keys(s).forEach(function(t){var e=s[t];e.active=e.id===u})}t.storage.setCarts(i,s),r(s)}})}).catch(n)})}},{key:\"getActiveCart\",value:function(){var t=this,e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];return new Promise(function(r,n){t.getStoreId().then(function(i){var o=t.storage.getCarts(i);if(Object.keys(o).length){var s=Object.values(o).find(function(t){return t.active});return s?e?void t.getCart(s.id).then(r).catch(n):void r(s.id):void r(null)}r(null)}).catch(n)})}},{key:\"addToCart\",value:function(t,e){var r=this;return new Promise(function(n,i){return is.objectId(t)?is.empty(e)?void i(new Error(\"A valid product is required\")):void http.post(config.urls.addToCart(r.env,t),e).then(function(t){var e=new Cart(r,t,!0);r.setStore(e.store),r.setActiveCart(e.id).then(function(){n(e)}).catch(i)}).catch(i):void i(new Error(\"A valid id is required\"))})}},{key:\"updateCartItemQuantity\",value:function(t,e){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return new Promise(function(i,o){return is.objectId(t)?is.empty(e)?void o(new Error(\"A valid index is required\")):void http.post(config.urls.updateCartItemQuantity(r.env,t),{index:e,quantity:n}).then(function(t){var e=new Cart(r,t,!0);r.setStore(e.store),r.setActiveCart(e.id).then(function(){i(e)}).catch(o)}).catch(o):void o(new Error(\"A valid id is required\"))})}},{key:\"removeFromCart\",value:function(t,e){var r=this;return new Promise(function(n,i){return is.objectId(t)?is.empty(e)?void i(new Error(\"A valid index is required\")):void http.post(config.urls.removeFromCart(r.env,t),{index:e}).then(function(t){if(is.empty(t))r.getCarts().then(function(){return n(null)}).catch(i);else{var e=new Cart(r,t,!0);r.setActiveCart(e.id).then(function(){n(e)}).catch(i)}}).catch(i):void i(new Error(\"A valid id is required\"))})}}]),t}();export default Client;export{Product,Category,Cart,Store};","import Client from '../../dist/client';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const output = document.getElementById('output');\n\n    function log(label, data) {\n        // console.log(label, data);\n        const details = document.createElement('details');\n\n        const summary = document.createElement('summary');\n        summary.innerHTML = label;\n        details.appendChild(summary);\n\n        const contents = document.createElement('div');\n        const pre = document.createElement('pre');\n        pre.classList.add('prettyprint');\n        pre.innerHTML = JSON.stringify(data, null, 4);\n        contents.appendChild(pre);\n        details.appendChild(contents);\n\n        output.appendChild(details);\n\n        window.prettyPrint();\n    }\n\n    function fail(label, errors) {\n        if (errors instanceof Error) {\n            // console.error(errors);\n            return log(`${label} (error)`, { error: errors.toString() });\n        }\n\n        return log(`${label} (failed)`, errors);\n    }\n\n    const client = new Client({\n        store: 'local.sampotts.me',\n        env: 'local',\n    });\n\n    // Expose\n    window.client = client;\n\n    log('Client', client);\n\n    function getCart(currency) {\n        return new Promise((resolve, reject) => {\n            if (window.cart) {\n                resolve(window.cart);\n                return;\n            }\n\n            client\n                .getCart(currency)\n                .then(cart => {\n                    log('Get cart', cart);\n\n                    window.cart = cart;\n\n                    resolve(cart);\n                })\n                .catch(error => reject(error));\n        });\n    }\n\n    function addToCart(product) {\n        getCart(product.currency_code)\n            .then(cart => {\n                let variant = null;\n\n                if (typeof product.variant === 'string' && product.variant.length) {\n                    ({ variant } = product);\n                } else if (product.variants && product.variants.length) {\n                    variant = product.variants[0].id;\n                }\n\n                cart.add({\n                    id: product.id,\n                    quantity: 2,\n                    variant_id: variant,\n                })\n                    .then(updatedCart => {\n                        log('Add to cart', updatedCart);\n\n                        window.cart = updatedCart;\n                    })\n                    .catch(error => fail('Add to cart', error));\n            })\n            .catch(error => fail('Get cart', error));\n    }\n\n    const products = {\n        GBP: 'http://selz.co/1MaSYRU',\n        USD: 'http://selz.co/1rvbhT6',\n    };\n\n    client\n        .getProduct(products.GBP)\n        .then(product => {\n            log('Product', product);\n\n            // Expose\n            window.product = product;\n\n            addToCart(product);\n        })\n        .catch(errors => fail('Product', errors));\n\n    // Listen for messages from parent\n    /* window.addEventListener('message', event => {\n        // console.warn(event.data);\n        const json = JSON.parse(event.data);\n\n        if (json.key !== 'add-to-cart') {\n            return;\n        }\n\n        addToCart(json.data);\n    }); */\n});\n"]}