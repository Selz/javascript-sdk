!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SelzClient=e()}(this,function(){"use strict";function t(t){return"https://"+("string"==typeof t&&t.length?t+".":"")+"selz.com/sdk/"}function e(t){return t.replace(y,function(t,e){return e?" "+e:""})}function n(t){return t.replace(p,function(t,e,n){return e+" "+n.toLowerCase().split("").join(" ")})}function r(t,e){var n={mode:"cors",redirect:"follow"};return new Promise(function(r,i){fetch(t,Object.assign(n,e)).then(function(t){t.json().then(function(t){var e=m(t);!0===e.error?i(e.message):r(e)}).catch(i)}).catch(i)})}var i={urls:{product:function(e,n){return t(e)+"product?url="+n},products:function(e,n){return t(e)+"products/"+n},userId:function(e,n){return t(e)+"userid?domain="+n},createCart:function(e,n){return t(e)+"createcart/"+n},getCart:function(e,n){return t(e)+"cart/"+n}}},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=(function(){function t(t){this.value=t}function e(e){function n(i,o){try{var u=e[i](o),c=u.value;c instanceof t?Promise.resolve(c.value).then(function(t){n("next",t)},function(t){n("throw",t)}):r(u.done?"return":"normal",u.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):o=null}var i,o;this._invoke=function(t,e){return new Promise(function(r,u){var c={key:t,arg:e,resolve:r,reject:u,next:null};o?o=o.next=c:(i=o=c,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t){return!("object"!==(void 0===t?"undefined":o(t))||null===t||t instanceof RegExp||t instanceof Error||t instanceof Date)},s=function t(e,n,r,i){if(r=Object.assign({deep:!1,target:{}},r),(i=i||new WeakMap).has(e))return i.get(e);i.set(e,r.target);var o=r.target;delete r.target;var u=!0,c=!1,s=void 0;try{for(var f,l=Object.keys(e)[Symbol.iterator]();!(u=(f=l.next()).done);u=!0){var d=f.value,h=e[d],y=n(d,h,e),p=y[1];r.deep&&a(p)&&(p=Array.isArray(p)?p.map(function(e){return a(e)?t(e,n,r,i):e}):t(p,n,r,i)),o[y[0]]=p}}catch(t){c=!0,s=t}finally{try{!u&&l.return&&l.return()}finally{if(c)throw s}}return o},f=function(t){return l.test(t)?t.toLowerCase():(h.test(t)&&(t=e(t)),d.test(t)&&(t=n(t)),t.toLowerCase())},l=/\s/,d=/[a-z][A-Z]/,h=/[\W_]/,y=/[\W_]+(.|$)/g,p=/(.)([A-Z]+)/g,g=function(t){return f(t).replace(/[\W_]+(.|$)/g,function(t,e){return e?" "+e:""})},v=function(t){return g(t).replace(/\s/g,"_")},m=function(t){return s(t,function(t,e){return[v(t),e]},{deep:!0})},b={is:{object:function(t){return t===Object(t)}}},w={get:function(t){return new r(t)},post:function(t,e){var n={method:"POST",body:new FormData};return b.is.object(e)&&Object.keys(e).forEach(function(t){n.body.append(t,e[t])}),new r(t,n)}},k=function(){function t(e){u(this,t),this.id=e.id,this.seller_id=e.seller_id,this.url=e.id,this.currency_code=e.currency_code,this.total_price=e.total_price,this.total_price_display=e.total_price_display,this.items=e.items,this.channel=e.channel,this.tracking_id=e.tracking_id,this.created_time=e.created_time,this.updated_time=e.updated_time}return c(t,[{key:"addItem",value:function(){return this.id}},{key:"removeItem",value:function(){return this.id}}]),t}();return function(){function t(e){if(u(this,t),this.config=Object.assign({domain:"",id:-1},e),!this.isIdSet()&&!this.isDomainSet())throw Error("user or domain are required")}return c(t,[{key:"isIdSet",value:function(){return Number.isInteger(this.config.id)&&-1!==this.config.id}},{key:"isDomainSet",value:function(){return"string"==typeof this.config.domain&&this.config.domain.length}},{key:"getProduct",value:function(t){return w.get(i.urls.product(this.config.env,t))}},{key:"getAllProducts",value:async function(){return await this.getUser(),w.get(i.urls.products(this.config.env,this.config.id))}},{key:"getUser",value:function(){var t=this;return this.isIdSet()?new Promise(function(e){return e(t.config.id)}):new Promise(function(e,n){w.get(i.urls.userId(t.config.env,t.config.domain)).then(function(n){t.config.id=n.id,e(n.id)}).catch(function(t){return n(t)})})}},{key:"createCart",value:async function(t,e){return await this.getUser(),w.post(i.urls.createCart(this.config.env,this.config.id),{currency:t,discount:"string"==typeof e&&e.length?e:null})}},{key:"getCart",value:async function(t){var e=this;return await this.getUser(),new Promise(function(n,r){w.get(i.urls.getCart(e.config.env,t)).then(function(t){n(new k(t))}).catch(r)})}}]),t}()});
//# sourceMappingURL=SelzClient.js.map
