function getBase(t){return"https://"+("string"==typeof t&&t.length?t+".":"")+"selz.com/sdk/"}function toNoCase(t){return hasSpace.test(t)?t.toLowerCase():(hasSeparator.test(t)&&(t=unseparate(t)),hasCamel.test(t)&&(t=uncamelize(t)),t.toLowerCase())}function unseparate(t){return t.replace(separatorSplitter,function(t,e){return e?" "+e:""})}function uncamelize(t){return t.replace(camelSplitter,function(t,e,n){return e+" "+n.toLowerCase().split("").join(" ")})}function toSpaceCase(t){return toNoCase_1(t).replace(/[\W_]+(.|$)/g,function(t,e){return e?" "+e:""})}function toSnakeCase(t){return toSpaceCase_1(t).replace(/\s/g,"_")}function CustomFetch(t,e){var n={mode:"cors",redirect:"follow"};return new Promise(function(r,o){fetch(t,Object.assign(n,e)).then(function(t){t.json().then(function(t){var e=snakecaseKeys(t);!0===e.error?o(e.message):r(e)}).catch(o)}).catch(o)})}var config={urls:{product:function(t,e){return getBase(t)+"product?url="+e},products:function(t,e){return getBase(t)+"products/"+e},userId:function(t,e){return getBase(t)+"userid?domain="+e},createCart:function(t,e){return getBase(t)+"createcart/"+e},getCart:function(t,e){return getBase(t)+"cart/"+e}}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},asyncGenerator=function(){function t(t){this.value=t}function e(e){function n(o,i){try{var a=e[o](i),c=a.value;c instanceof t?Promise.resolve(c.value).then(function(t){n("next",t)},function(t){n("throw",t)}):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":o.resolve({value:e,done:!0});break;case"throw":o.reject(e);break;default:o.resolve({value:e,done:!1})}(o=o.next)?n(o.key,o.arg):i=null}var o,i;this._invoke=function(t,e){return new Promise(function(r,a){var c={key:t,arg:e,resolve:r,reject:a,next:null};i?i=i.next=c:(o=i=c,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),isObject=function(t){return!("object"!==(void 0===t?"undefined":_typeof(t))||null===t||t instanceof RegExp||t instanceof Error||t instanceof Date)},mapObj=function t(e,n,r,o){if(r=Object.assign({deep:!1,target:{}},r),(o=o||new WeakMap).has(e))return o.get(e);o.set(e,r.target);var i=r.target;delete r.target;var a=!0,c=!1,u=void 0;try{for(var s,f=Object.keys(e)[Symbol.iterator]();!(a=(s=f.next()).done);a=!0){var l=s.value,h=e[l],p=n(l,h,e),d=p[1];r.deep&&isObject(d)&&(d=Array.isArray(d)?d.map(function(e){return isObject(e)?t(e,n,r,o):e}):t(d,n,r,o)),i[p[0]]=d}}catch(t){c=!0,u=t}finally{try{!a&&f.return&&f.return()}finally{if(c)throw u}}return i},toNoCase_1=toNoCase,hasSpace=/\s/,hasCamel=/[a-z][A-Z]/,hasSeparator=/[\W_]/,separatorSplitter=/[\W_]+(.|$)/g,camelSplitter=/(.)([A-Z]+)/g,toSpaceCase_1=toSpaceCase,toSnakeCase_1=toSnakeCase,snakecaseKeys=function(t){return mapObj(t,function(t,e){return[toSnakeCase_1(t),e]},{deep:!0})},utils={is:{object:function(t){return t===Object(t)}}},http={get:function(t){return new CustomFetch(t)},post:function(t,e){var n={method:"POST",body:new FormData};return utils.is.object(e)&&Object.keys(e).forEach(function(t){n.body.append(t,e[t])}),new CustomFetch(t,n)}},Cart=function(){function t(e){classCallCheck(this,t),this.id=e.id,this.seller_id=e.seller_id,this.url=e.id,this.currency_code=e.currency_code,this.total_price=e.total_price,this.total_price_display=e.total_price_display,this.items=e.items,this.channel=e.channel,this.tracking_id=e.tracking_id,this.created_time=e.created_time,this.updated_time=e.updated_time}return createClass(t,[{key:"addItem",value:function(){return this.id}},{key:"removeItem",value:function(){return this.id}}]),t}(),SelzClient=function(){function t(e){if(classCallCheck(this,t),this.config=Object.assign({domain:"",id:-1},e),!this.isIdSet()&&!this.isDomainSet())throw Error("user or domain are required")}return createClass(t,[{key:"isIdSet",value:function(){return Number.isInteger(this.config.id)&&-1!==this.config.id}},{key:"isDomainSet",value:function(){return"string"==typeof this.config.domain&&this.config.domain.length}},{key:"getProduct",value:function(t){return http.get(config.urls.product(this.config.env,t))}},{key:"getAllProducts",value:async function(){return await this.getUser(),http.get(config.urls.products(this.config.env,this.config.id))}},{key:"getUser",value:function(){var t=this;return this.isIdSet()?new Promise(function(e){return e(t.config.id)}):new Promise(function(e,n){http.get(config.urls.userId(t.config.env,t.config.domain)).then(function(n){t.config.id=n.id,e(n.id)}).catch(function(t){return n(t)})})}},{key:"createCart",value:async function(t,e){return await this.getUser(),http.post(config.urls.createCart(this.config.env,this.config.id),{currency:t,discount:"string"==typeof e&&e.length?e:null})}},{key:"getCart",value:async function(t){var e=this;return await this.getUser(),new Promise(function(n,r){http.get(config.urls.getCart(e.config.env,t)).then(function(t){n(new Cart(t))}).catch(r)})}}]),t}();export default SelzClient;
//# sourceMappingURL=SelzClient.mjs.map
